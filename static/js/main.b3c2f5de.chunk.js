(this["webpackJsonppdf-editor"]=this["webpackJsonppdf-editor"]||[]).push([[0],{220:function(e,t,n){e.exports=n(382)},225:function(e,t,n){},382:function(e,t,n){"use strict";n.r(t);var a,r,o,i,c=n(0),u=n.n(c),l=n(40),s=n.n(l),d=(n(225),n(21)),m=n(5),f=(n(226),n(388)),p=n(395),h=n(393),g=n(398),v=n(394),b=n(391),E=n(56),O=function(e){var t=e.openHelp,n=e.uploadNewPdf,a=e.addDrawing,r=e.addText,o=e.addImage,i=e.isPdfLoaded,c=e.savingPdfStatus,l=e.savePdf;return u.a.createElement(v.a,{pointing:!0},u.a.createElement(v.a.Item,{header:!0},"PDF Editor"),u.a.createElement(v.a.Menu,{position:"right"},i&&u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{item:!0,closeOnBlur:!0,icon:"edit outline",simple:!0},u.a.createElement(b.a.Menu,null,u.a.createElement(b.a.Item,{onClick:r},"Add Text"),u.a.createElement(b.a.Item,{onClick:o},"Add Image"),u.a.createElement(b.a.Item,{onClick:a},"Add Drawing"))),u.a.createElement(v.a.Item,{name:c?"Saving...":"Save",disabled:c,onClick:l}),u.a.createElement(v.a.Item,{name:"Upload New",onClick:n})),u.a.createElement(v.a.Item,{onClick:t},u.a.createElement(E.a,{name:"question circle outline"}))))},w=n(65),j=n(389),M=n(95);!function(e){e.MOVE="MOVE",e.SCALE="SCALE",e.NO_MOVEMENT="NO_MOVEMENT"}(a||(a={})),function(e){e.RED="red",e.ORANGE="orange",e.YELLOW="yellow",e.OLIVE="olive",e.GREEN="green",e.TEAL="teal",e.BLUE="blue",e.VIOLOET="violet",e.PURPLE="purple",e.BROWN="brown",e.GREY="grey",e.BLACK="black"}(r||(r={})),function(e){e.IMAGE="image",e.DRAWING="drawing",e.TEXT="text"}(o||(o={})),function(e){e.INSERT="insert",e.COMMAND="command"}(i||(i={}));var x=function(e){var t=e.open,n=e.dismiss,a=e.confirm,o=e.drawing,i=Object(c.createRef)(),l=Object(c.useState)([]),s=Object(m.a)(l,2),d=s[0],f=s[1],p=Object(c.useState)(o&&o.path||""),g=Object(m.a)(p,2),E=g[0],O=g[1],x=Object(c.useState)(0),y=Object(m.a)(x,2),A=y[0],T=y[1],k=Object(c.useState)(0),D=Object(m.a)(k,2),C=D[0],P=D[1],S=Object(c.useState)(1/0),I=Object(m.a)(S,2),N=I[0],R=I[1],L=Object(c.useState)(0),F=Object(m.a)(L,2),H=F[0],U=F[1],_=Object(c.useState)(1/0),W=Object(m.a)(_,2),V=W[0],z=W[1],Y=Object(c.useState)(0),G=Object(m.a)(Y,2),X=G[0],B=G[1],J=Object(c.useState)(!1),K=Object(m.a)(J,2),q=K[0],Q=K[1],$=Object(c.useState)(5),Z=Object(m.a)($,2),ee=Z[0],te=Z[1],ne=Object(c.useState)(r.BLACK),ae=Object(m.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(c.useState)(!1),ce=Object(m.a)(ie,2),ue=ce[0],le=ce[1];Object(c.useEffect)((function(){var e=i.current;if(e){var t=e.getBoundingClientRect(),n=t.x,a=t.y;T(n),P(a)}}),[i]);var se=function(){f([]),O(""),R(1/0),U(0),z(1/0),B(0),te(5),oe(r.BLACK),n()},de=function(e){return function(){oe(e),le(!1)}};return u.a.createElement(j.a,{size:"small",dimmer:"inverted",open:t,onClose:se},u.a.createElement(j.a.Header,null,"Add your Drawing"),u.a.createElement(j.a.Content,null,u.a.createElement(v.a,{size:"tiny"},u.a.createElement(v.a.Item,{header:!0},"Tools"),u.a.createElement(v.a.Menu,{position:"right"},u.a.createElement(b.a,{item:!0,text:"".concat(ee)},u.a.createElement(b.a.Menu,null,[1,2,3,4,5,6,7,8,9,10].map((function(e){return u.a.createElement(b.a.Item,{key:e,selected:e===ee,onClick:function(){return te(e)}},e)})))),u.a.createElement(b.a,{item:!0,trigger:u.a.createElement(M.a,{color:re}),onClick:function(){return le(!0)},onBlur:function(){return le(!1)}},u.a.createElement(b.a.Menu,{open:ue},u.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",padding:5}},Object.values(r).map((function(e,t){return u.a.createElement("div",{style:{margin:2.5},key:t},u.a.createElement(M.a,{color:e,onClick:de(e)}))}))))))),u.a.createElement("div",{onMouseDown:function(e){e.preventDefault(),Q(!0);var t=e.clientX-A,n=e.clientY-C;R(Math.min(N,t)),U(Math.max(H,t)),z(Math.min(V,n)),B(Math.max(X,n)),O(E+"M".concat(t,",").concat(n)),f([].concat(Object(w.a)(d),[["M",t,n]]))},onMouseMove:function(e){if(e.preventDefault(),q){var t=e.clientX-A,n=e.clientY-C;R(Math.min(N,t)),U(Math.max(H,t)),z(Math.min(V,n)),B(Math.max(X,n)),O(E+"L".concat(t,",").concat(n)),f([].concat(Object(w.a)(d),[["L",t,n]]))}},onMouseUp:function(e){e.preventDefault(),Q(!1)}},u.a.createElement("svg",{ref:i,style:{width:"100%",height:"50vh"}},u.a.createElement("path",{strokeWidth:ee,strokeLinejoin:"round",strokeLinecap:"round",stroke:re,fill:"none",d:E})))),u.a.createElement(j.a.Actions,null,u.a.createElement(h.a,{color:"black",content:"Cancel",onClick:se}),u.a.createElement(h.a,{content:"Done",labelPosition:"right",icon:"checkmark",onClick:function(){if(d.length){var e=-(N-10),t=-(V-10);a({stroke:re,strokeWidth:ee,width:H-N+20,height:X-V+20,path:d.reduce((function(n,a){return"".concat(n).concat(a[0]).concat(a[1]+e,", ").concat(a[2]+t)}),"")}),se()}else a()},positive:!0})))},y=n(392),A=[{title:"What's this?",content:["This is a piece of sofware that allows you to edit your PDFs. You can add images and drawings to your pdf.","And there are more features coming up like adding text."]},{title:"How do I delete an attached image or drawing?",content:["Easy! Just double click the image or drawing. You will be asked to confirm delete and then, voila, it's gone!"]},{title:"Can I add multiple images or drawings on a page?",content:["Yes."]},{title:"How can I delete my uploaded pdf?",content:["You can't delete the uploaded pdf.","You will have to upload a new one. This is a client-side app so you did not actually uploaded it to any server. Don't worry :)"]},{title:"Can I resize a drawing?",content:["No. Currently it is not possible to resize a drawing"]},{title:"Can I resize an image?",content:["Yes you can. Move your mouse to the top-left corner of the image.","The cursor should change and you should be able to resize from there"]},{title:"Can I load multi-page pdf?",content:["Yes."]},{title:"How do I add text to the pdf?",content:["-  In the dropdown menu for edit, select add Text. This will add a text object to your pdf","-  You should see a textbox with placeholder text `Enter Text Here`","-  The textbox has two modes, edit mode and command mode, you can toggle between either by double clicking any area within the textbox.","-  In Edit Mode, you can enter your desired text","-  In Command Mode, you can move the textbox around to change it's position"]},{title:"Why can't I enter multi-line text?",content:["The textfield feature is in beta. There are more functionalities to be added like resizing, selecting fonts, changing font size etc which are in development.","These functionalities should be available in the next release"]}],T=function(e){var t=e.open,n=e.dismiss,a=Object(c.useState)(-1),r=Object(m.a)(a,2),o=r[0],i=r[1],l=function(e,t){var n=t.index;i(o===n?-1:n)};return u.a.createElement(u.a.Fragment,null,u.a.createElement(j.a,{open:t,onClose:n,size:"small",dimmer:"inverted"},u.a.createElement(j.a.Header,null,u.a.createElement(E.a,{name:"question"}),"FAQ"),u.a.createElement(j.a.Content,{scrolling:!0},u.a.createElement(y.a,{fluid:!0,styled:!0},A.map((function(e,t){return u.a.createElement(u.a.Fragment,{key:t},u.a.createElement(y.a.Title,{active:o===t,index:t,onClick:l},u.a.createElement(E.a,{name:"dropdown"}),e.title),u.a.createElement(y.a.Content,{active:o===t},e.content.map((function(e,t){return u.a.createElement("p",{key:t},e)}))))}))))))},k=n(10),D=n.n(k),C=n(15),P=[{name:"pdfjsLib",src:"https://unpkg.com/pdfjs-dist@2.3.200/build/pdf.min.js"},{name:"PDFLib",src:"https://unpkg.com/pdf-lib@1.4.0/dist/pdf-lib.min.js"},{name:"download",src:"https://unpkg.com/downloadjs@1.4.7"},{name:"makeTextPDF",src:"https://cdn.jsdelivr.net/gh/snamoah/react-pdf-editor/public/makeTextPDF.js"},{name:"w3Color",src:"https://www.w3schools.com/lib/w3color.js"}],S={},I=function(e){return S[e]},N={Courier:{correction:function(e,t){return(e*t-e)/2+e/6}},Helvetica:{correction:function(e,t){return(e*t-e)/2+e/10}},"Times-Roman":{correction:function(e,t){return(e*t-e)/2+e/7}}},R=(Object(d.a)({},N,{"\u6a19\u6977\u9ad4":{src:"/CK.ttf",correction:function(e,t){return(e*t-e)/2}}}),function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}),L=function(e){return new Promise((function(t,n){var a=new Image;if(a.onload=function(){return t(a)},a.onerror=n,e instanceof Blob){var r=window.URL.createObjectURL(e);a.src=r}else a.src=e}))},F=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsDataURL(e)}))},H=function(){var e=Object(C.a)(D.a.mark((function e(t){var n,a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("pdfjsLib");case 2:return n=e.sent,a=new Blob([t]),r=window.URL.createObjectURL(a),e.abrupt("return",n.getDocument(r).promise);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){var e=0;return function(){return e++}}var _=function(e,t,n,a,r,o,i,c){var u=t+a,l=e+n;return{top:u<0?0:u+o>c?c-o:u,left:l<0?0:l+r>i?i-r:l}},W=function(e){return parseFloat((e/255).toFixed(1))};function V(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(C.a)(D.a.mark((function e(t,n,a){var r,o,i,c,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("PDFLib");case 2:return r=e.sent,e.next=5,I("download");case 5:return o=e.sent,e.prev=6,e.t0=r.PDFDocument,e.next=10,R(t);case 10:return e.t1=e.sent,e.next=13,e.t0.load.call(e.t0,e.t1);case 13:i=e.sent,e.next=20;break;case 16:throw e.prev=16,e.t2=e.catch(6),console.log("Failed to load PDF."),e.t2;case 20:return c=i.getPages().map(function(){var e=Object(C.a)(D.a.mark((function e(t,a){var o,c,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n[a],c=t.getHeight(),u=o.map(function(){var e=Object(C.a)(D.a.mark((function e(n){var a,o,u,l,s,d,m,f,p,h,g,v,b,E,O,w,j,M,x,y,A,T,k,C,P,S,I,N,L,F;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!==n.type){e.next=29;break}if(o=(a=n).file,u=a.x,l=a.y,s=a.width,d=a.height,e.prev=2,"image/jpeg"!==o.type){e.next=13;break}return e.t0=i,e.next=7,R(o);case 7:return e.t1=e.sent,e.next=10,e.t0.embedJpg.call(e.t0,e.t1);case 10:m=e.sent,e.next=20;break;case 13:return e.t2=i,e.next=16,R(o);case 16:return e.t3=e.sent,e.next=19,e.t2.embedPng.call(e.t2,e.t3);case 19:m=e.sent;case 20:return e.abrupt("return",(function(){return t.drawImage(m,{x:u,y:c-l-d,width:s,height:d})}));case 23:throw e.prev=23,e.t4=e.catch(2),console.log("Failed to embed image.",e.t4),e.t4;case 27:e.next=41;break;case 29:if("text"!==n.type){e.next=37;break}return p=(f=n).x,h=f.y,g=f.text,v=f.lineHeight,b=f.size,E=f.fontFamily,O=f.width,e.next=33,i.embedFont(E);case 33:return w=e.sent,e.abrupt("return",(function(){return t.drawText(g,{maxWidth:O,font:w,size:b,lineHeight:v,x:p,y:c-b-h})}));case 37:if("drawing"!==n.type){e.next=41;break}return M=(j=n).x,x=j.y,y=j.path,A=j.scale,T=j.stroke,k=j.strokeWidth,C=r.pushGraphicsState,P=r.setLineCap,S=r.popGraphicsState,I=r.setLineJoin,N=r.LineCapStyle,L=r.LineJoinStyle,F=r.rgb,e.abrupt("return",(function(){t.pushOperators(C(),P(N.Round),I(L.Round));var e=window.w3color(T).toRgb();t.drawSvgPath(y,{borderColor:F(W(e.r),W(e.g),W(e.b)),borderWidth:k,scale:A,x:M,y:c-x}),t.pushOperators(S())}));case 41:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(u);case 5:e.sent.forEach((function(e){return e()}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=23,Promise.all(c);case 23:return e.prev=23,e.next=26,i.save();case 26:u=e.sent,o(u,a,"application/pdf"),e.next=34;break;case 30:throw e.prev=30,e.t3=e.catch(23),console.log("Failed to save PDF."),e.t3;case 34:case"end":return e.stop()}}),e,null,[[6,16],[23,30]])})))).apply(this,arguments)}var Y;!function(e){e.RESET="RESET",e.ADD_ATTACHMENT="ADD_ATTACHMENT",e.REMOVE_ATTACHMENT="REMOVE_ATTACHMENT",e.UPDATE_ATTACHMENT="UPDATE_ATTACHMENT",e.UPDATE_PAGE_INDEX="UPDATE_PAGE_INDEX"}(Y||(Y={}));var G,X={pageIndex:-1,allPageAttachments:[],pageAttachments:[]},B=function(e,t){var n=e.pageIndex,a=e.allPageAttachments,r=e.pageAttachments;switch(t.type){case Y.ADD_ATTACHMENT:var o=a.map((function(e,a){return n===a?[].concat(Object(w.a)(e),[t.attachment]):e}));return Object(d.a)({},e,{allPageAttachments:o,pageAttachments:o[n]});case Y.REMOVE_ATTACHMENT:var i=a.map((function(e,a){return n===a?r.filter((function(e,n){return n!==t.attachmentIndex})):e}));return Object(d.a)({},e,{allPageAttachments:i,pageAttachments:i[n]});case Y.UPDATE_ATTACHMENT:if(-1===n)return e;var c=a.map((function(e,a){return n===a?r.map((function(e,n){return n===t.attachmentIndex?Object(d.a)({},e,{},t.attachment):e})):e}));return Object(d.a)({},e,{allPageAttachments:c,pageAttachments:c[n]});case Y.UPDATE_PAGE_INDEX:return Object(d.a)({},e,{pageIndex:t.pageIndex,pageAttachments:a[t.pageIndex]});case Y.RESET:return{pageIndex:0,pageAttachments:[],allPageAttachments:Array(t.numberOfPages).fill([])};default:return e}};!function(e){e.PDF="pdf",e.IMAGE="image"}(G||(G={}));var J={pdf:function(){var e=Object(C.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(t);case 3:return n=e.sent,e.abrupt("return",{file:t,name:t.name,pages:Array(n.numPages).fill(0).map((function(e,t){return n.getPage(t+1)}))});case 7:throw e.prev=7,e.t0=e.catch(0),console.log("Failed to load pdf",e.t0),new Error("Failed to load PDF");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),image:function(){var e=Object(C.a)(D.a.mark((function e(t){var n,a,r,i,c,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:return n=e.sent,e.next=6,L(n);case 6:return a=e.sent,r=U(),i=a.width,c=a.height,u={id:r,type:o.IMAGE,width:i,height:c,x:0,y:0,img:a,file:t},e.abrupt("return",u);case 13:throw e.prev=13,e.t0=e.catch(0),console.log("Failed to load image",e.t0),new Error("Failed to load image");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},K=function(e){var t=e.use,n=e.afterUploadPdf,a=e.afterUploadAttachment,r=Object(c.useState)(!1),o=Object(m.a)(r,2),i=o[0],u=o[1],l=Object(c.createRef)();return{upload:function(){var e=Object(C.a)(D.a.mark((function e(r){var o,c,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:if(o=r.currentTarget.files||r.dataTransfer&&r.dataTransfer.files){e.next=6;break}return u(!1),e.abrupt("return");case 6:return c=o[0],e.next=9,J[t](c);case 9:return l=e.sent,t===G.PDF&&n&&n(l),t===G.IMAGE&&a&&(console.log("===> was this also called"),a(l)),u(!1),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClick:function(e){e.currentTarget.value=""},inputRef:l,isUploading:i,handleClick:function(){var e=l.current;e&&(u(!0),e.click())}}},q=n(397),Q=function(e){var t=e.loading,n=e.uploadPdf;return u.a.createElement(g.a,{placeholder:!0,loading:t,style:{height:"80vh"}},u.a.createElement(q.a,{icon:!0},u.a.createElement(E.a,{name:"file pdf outline"}),"Upload your PDF to start editing!"),u.a.createElement(h.a,{primary:!0,onClick:n},"Load PDF"))},$=function(e){var t=e.page,n=e.dimensions,a=e.updateDimensions,r=Object(c.useRef)(null),o=Object(c.useState)(n&&n.width||0),i=Object(m.a)(o,2),l=i[0],s=i[1],d=Object(c.useState)(n&&n.height||0),f=Object(m.a)(d,2),p=f[0],h=f[1];return Object(c.useEffect)((function(){(function(){var e=Object(C.a)(D.a.mark((function e(t){var n,o,i,c,u,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!(n=e.sent)){e.next=13;break}if(i=null===(o=r.current)||void 0===o?void 0:o.getContext("2d"),c=n.getViewport({scale:1}),s(c.width),h(c.height),!i){e.next=13;break}return e.next=11,n.render({canvasContext:null===(u=r.current)||void 0===u?void 0:u.getContext("2d"),viewport:c}).promise;case 11:l={width:c.width,height:c.height},a(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[t,a]),u.a.createElement("div",null,u.a.createElement("canvas",{ref:r,width:l,height:p}))},Z=n(396),ee=n(206);function te(){var e=Object(ee.a)(["\n    position: relative\n"]);return te=function(){return e},e}var ne=n(207).a.div(te()),ae=function(e){var t=e.title,n=e.onConfirm,a=e.onDismiss;return u.a.createElement("div",null,u.a.createElement(q.a,{as:"h4",inverted:!0},t),u.a.createElement(h.a,{onClick:a},"No"),u.a.createElement(h.a,{negative:!0,onClick:n},"Yes"))},re=function(e){var t=e.canvasRef,n=e.positionTop,a=e.positionLeft,r=e.width,o=e.height,i=e.handleMouseOut,c=e.handleMouseDown,l=e.handleMouseMove,s=e.handleMouseUp,d=e.handleImageScale,m=e.dimmerActive,f=e.cancelDelete,p=e.deleteImage,h=e.onClick;return u.a.createElement("div",{onMouseDown:c,onMouseMove:l,onMouseUp:s,onMouseOut:i,onDoubleClick:h,style:{position:"absolute",top:n,left:a,borderStyle:"dashed",borderWidth:1,borderColor:"grey",width:r+2,height:o+2,cursor:"move"}},u.a.createElement(Z.a.Dimmable,{as:ne,size:"medium",dimmed:m},u.a.createElement("canvas",{ref:t,style:{width:"100%",height:"100%"}}),u.a.createElement(Z.a,{active:m,onClickOutside:f},u.a.createElement(ae,{title:"Delete?",onConfirm:p,onDismiss:f}))),u.a.createElement("div",{"data-direction":"top-left",onMouseDown:c,onMouseUp:s,onMouseMove:d,style:{position:"absolute",cursor:"nwse-resize",top:-5,left:-5,width:20,height:20}}))},oe=function(e){var t=e.x,n=e.y,r=e.img,o=e.width,i=e.height,l=e.pageWidth,s=e.removeImage,d=e.pageHeight,f=e.updateImageAttachment,p=Object(c.useRef)(null),h=Object(c.useState)(o),g=Object(m.a)(h,2),v=g[0],b=g[1],E=Object(c.useState)(i),O=Object(m.a)(E,2),w=O[0],j=O[1],M=Object(c.useState)(!1),x=Object(m.a)(M,2),y=x[0],A=x[1],T=Object(c.useState)(n),k=Object(m.a)(T,2),D=k[0],C=k[1],P=Object(c.useState)(t),S=Object(m.a)(P,2),I=S[0],N=S[1],R=Object(c.useState)([]),L=Object(m.a)(R,2),F=L[0],H=L[1],U=Object(c.useState)(a.NO_MOVEMENT),W=Object(m.a)(U,2),V=W[0],z=W[1],Y=Object(c.useState)(!1),G=Object(m.a)(Y,2),X=G[0],B=G[1],J=function(e){if(e.preventDefault(),A(!1),V===a.MOVE){var t=_(I,D,e.movementX,e.movementY,v,w,l,d),n=t.top,r=t.left;f({x:r,y:n})}V===a.SCALE&&f({x:I,y:D}),z(a.NO_MOVEMENT)};Object(c.useEffect)((function(){!function(e){var t=p.current;if(t){var n=t.getContext("2d");if(n){var a=1;v>300&&(a=300/v),w>300&&(a=Math.min(a,300/w));var r=v*a,o=w*a;b(r),j(o),t.width=r,t.height=o,n.drawImage(e,0,0,r,o),t.toBlob((function(e){f({file:e,width:r,height:o})}))}}}(r)}),[r,v,w,f]);var K=function(){return B(!1)};return u.a.createElement(re,{onClick:function(){return B(!0)},dimmerActive:X,cancelDelete:K,deleteImage:function(){K(),s()},positionLeft:I,positionTop:D,canvasRef:p,width:v,height:w,handleImageScale:function(e){e.preventDefault(),y&&(F.includes("left")&&(N(I+e.movementX),b(v-e.movementX)),F.includes("top")&&(C(D+e.movementY),j(w-e.movementY)),F.includes("right")&&b(v+e.movementX),F.includes("bottom")&&j(w+e.movementY))},handleMouseDown:function(e){e.preventDefault(),A(!0),z(a.MOVE);var t=e.currentTarget.dataset.direction;t&&(H(t.split("-")),z(a.SCALE))},handleMouseUp:J,handleMouseMove:function(e){if(e.preventDefault(),y){var t=_(I,D,e.movementX,e.movementY,v,w,l,d),n=t.top,a=t.left;C(n),N(a)}},handleMouseOut:function(e){V===a.MOVE&&J(e)}})},ie=function(e){var t=e.dimmerActive,n=e.cancelDelete,a=e.deleteDrawing,r=e.positionTop,o=e.positionLeft,i=e.width,c=e.height,l=e.svgRef,s=e.path,d=e.stroke,m=e.strokeWidth,f=e.handleMouseDown,p=e.handleMouseMove,h=e.handleMouseOut,g=e.handleMouseUp,v=e.onClick;return u.a.createElement("div",{onMouseDown:f,onMouseMove:p,onMouseUp:g,onMouseOut:h,onDoubleClick:v,style:{position:"absolute",top:r,left:o,width:i,height:c,cursor:"move"}},u.a.createElement(Z.a.Dimmable,{as:ne,dimmed:t},u.a.createElement("svg",{ref:l},u.a.createElement("path",{strokeWidth:m,strokeLinecap:"round",strokeLinejoin:"round",stroke:d,fill:"none",d:s})),u.a.createElement(Z.a,{active:t,onClickOutside:n},u.a.createElement(ae,{title:"Delete?",onConfirm:a,onDismiss:n}))))},ce=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.stroke,l=e.strokeWidth,s=e.path,d=e.pageWidth,f=e.pageHeight,p=e.removeDrawing,h=e.updateDrawingAttachment,g=Object(c.createRef)(),v=Object(c.useState)(!1),b=Object(m.a)(v,2),E=b[0],O=b[1],w=Object(c.useState)(n),j=Object(m.a)(w,2),M=j[0],x=j[1],y=Object(c.useState)(t),A=Object(m.a)(y,2),T=A[0],k=A[1],D=Object(c.useState)(a.NO_MOVEMENT),C=Object(m.a)(D,2),P=C[0],S=C[1],I=Object(c.useState)(!1),N=Object(m.a)(I,2),R=N[0],L=N[1];Object(c.useEffect)((function(){var e=g.current;e&&e.setAttribute("viewBox","0 0 ".concat(r," ").concat(o))}),[g,r,o]);var F=function(e){if(e.preventDefault(),O(!1),P===a.MOVE){var t=_(T,M,e.movementX,e.movementY,r,o,d,f),n=t.top,i=t.left;h({x:i,y:n})}P===a.SCALE&&h({x:T,y:M}),S(a.NO_MOVEMENT)},H=function(){return L(!1)};return u.a.createElement(ie,{stroke:i,strokeWidth:l,path:s,width:r,svgRef:g,height:o,onClick:function(){return L(!0)},cancelDelete:H,dimmerActive:R,deleteDrawing:function(){H(),p()},handleMouseDown:function(e){O(!0),S(a.MOVE)},handleMouseMove:function(e){if(e.preventDefault(),E){var t=_(T,M,e.movementX,e.movementY,r,o,d,f),n=t.top,a=t.left;x(n),k(a)}},handleMouseOut:function(e){P===a.MOVE&&F(e)},handleMouseUp:F,positionLeft:T,positionTop:M})},ue=function(e){var t=e.text,n=e.width,a=e.height,r=e.inputRef,o=e.mode,c=e.size,l=e.fontFamily,s=e.positionTop,d=e.positionLeft,m=e.onChangeText,f=e.toggleEditMode,p=e.handleMouseDown,h=e.handleMouseMove,g=e.handleMouseOut,v=e.handleMouseUp,b=e.lineHeight;return u.a.createElement("div",{onMouseDown:p,onMouseMove:h,onMouseUp:v,onMouseOut:g,onDoubleClick:f,style:{width:n,border:1,height:a,fontFamily:l,fontSize:c,lineHeight:b,cursor:o===i.COMMAND?"move":"default",top:s,left:d,borderColor:"gray",borderStyle:"solid",wordWrap:"break-word",padding:0,position:"absolute"}},u.a.createElement("input",{type:"text",ref:r,onChange:m,readOnly:o===i.COMMAND,style:{width:"100%",borderStyle:"none",borderWidth:0,fontFamily:l,fontSize:c,outline:"none",padding:0,boxSizing:"border-box",lineHeight:b,height:a,margin:0,backgroundColor:"transparent",cursor:o===i.COMMAND?"move":"text"},value:t}))},le=function(e){var t=e.x,n=e.y,r=e.text,o=e.width,l=e.height,s=e.lineHeight,d=e.size,f=e.fontFamily,p=e.pageHeight,h=e.pageWidth,g=e.updateTextAttachment,v=Object(c.useRef)(null),b=Object(c.useState)(r||""),E=Object(m.a)(b,2),O=E[0],w=E[1],j=Object(c.useState)(!1),M=Object(m.a)(j,2),x=M[0],y=M[1],A=Object(c.useState)(n),T=Object(m.a)(A,2),k=T[0],D=T[1],C=Object(c.useState)(t),P=Object(m.a)(C,2),S=P[0],I=P[1],N=Object(c.useState)(a.NO_MOVEMENT),R=Object(m.a)(N,2),L=R[0],F=R[1],H=Object(c.useState)(i.COMMAND),U=Object(m.a)(H,2),W=U[0],V=U[1],z=function(e){if(e.preventDefault(),W===i.COMMAND){if(y(!1),L===a.MOVE){var t=_(S,k,e.movementX,e.movementY,o,l,h,p),n=t.top,r=t.left;g({x:r,y:n})}F(a.NO_MOVEMENT)}},Y=function(){var e;null===(e=document.getSelection())||void 0===e||e.removeAllRanges(),g({lines:[O],text:O})};return u.a.createElement(ue,{text:O,width:o,height:l,mode:W,size:d,lineHeight:s,inputRef:v,fontFamily:f,positionTop:k,onChangeText:function(e){var t=e.currentTarget.value;w(t)},positionLeft:S,handleMouseUp:z,toggleEditMode:function(){var e=v.current,t=W===i.COMMAND?i.INSERT:i.COMMAND;V(t),e&&t===i.INSERT?(e.focus(),e.select()):Y()},handleMouseOut:function(e){L===a.MOVE&&z(e),W===i.INSERT&&(V(i.COMMAND),Y())},handleMouseDown:function(e){W===i.COMMAND&&(y(!0),F(a.MOVE))},handleMouseMove:function(e){if(e.preventDefault(),x){var t=_(S,k,e.movementX,e.movementY,o,l,h,p),n=t.top,a=t.left;D(n),I(a)}}})},se=function(e){var t=e.attachments,n=e.pdfName,a=e.pageDimensions,r=e.removeAttachment,i=e.updateAttachment,c=function(e){return function(t){return i(e,t)}};return t?u.a.createElement(u.a.Fragment,null,t.length?t.map((function(e,t){var i="".concat(n,"-").concat(t);return e.type===o.IMAGE?u.a.createElement(oe,Object.assign({key:i,pageWidth:a.width,pageHeight:a.height,removeImage:function(){return r(t)},updateImageAttachment:c(t)},e)):e.type===o.DRAWING?u.a.createElement(ce,Object.assign({key:i,pageWidth:a.width,pageHeight:a.height,removeDrawing:function(){return r(t)},updateDrawingAttachment:c(t)},e)):e.type===o.TEXT?u.a.createElement(le,Object.assign({key:i,pageWidth:a.width,pageHeight:a.height,updateTextAttachment:c(t)},e)):null})):null):null},de=function(){var e=Object(c.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(m.a)(r,2),l=i[0],s=i[1],v=function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(-1),o=Object(m.a)(r,2),i=o[0],u=o[1],l=Object(c.useState)(),s=Object(m.a)(l,2),d=s[0],f=s[1],p=Object(c.useState)(),h=Object(m.a)(p,2),g=h[0],v=h[1],b=Object(c.useState)([]),E=Object(m.a)(b,2),O=E[0],w=E[1],j=Object(c.useState)(!1),M=Object(m.a)(j,2),x=M[0],y=M[1],A=Object(c.useState)(!1),T=Object(m.a)(A,2),k=T[0],P=T[1],S=Object(c.useState)(!1),I=Object(m.a)(S,2),N=I[0],R=I[1],L=Object(c.useState)(!1),F=Object(m.a)(L,2),H=F[0],U=F[1];return{currentPage:O[i],dimensions:d,setDimensions:Object(c.useCallback)(f,[f]),name:n,setName:a,pageIndex:i,setPageIndex:u,file:g,setFile:v,nextPage:function(){var e=i+1;u(i+1),P(0===e),R(e===O.length-1)},pages:O,savePdf:function(){var e=Object(C.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H&&g){e.next=2;break}return e.abrupt("return");case 2:return U(!0),e.prev=3,e.next=6,V(g,t,n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:return e.prev=11,U(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[3,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),initialize:function(e){var t=e.name,n=e.file,r=e.pages,o=r.length>1;a(t),v(n),w(r),u(0),y(o),P(!0),R(1===r.length)},isMultiPage:x,previousPage:function(){var e=i-1;u(e),P(0===e),R(e===O.length-1)},isFirstPage:k,isLastPage:N,isSaving:H}}(),b=v.file,E=v.initialize,w=v.pageIndex,j=v.isMultiPage,M=v.isFirstPage,y=v.isLastPage,A=v.currentPage,k=v.isSaving,P=v.savePdf,S=v.previousPage,I=v.nextPage,N=v.setDimensions,R=v.name,L=v.dimensions,F=function(){var e=Object(c.useReducer)(B,X),t=Object(m.a)(e,2),n=t[0],a=t[1],r=n.allPageAttachments,o=n.pageAttachments;return{add:function(e){return a({type:Y.ADD_ATTACHMENT,attachment:e})},reset:function(e){return a({type:Y.RESET,numberOfPages:e})},remove:function(e){return a({type:Y.REMOVE_ATTACHMENT,attachmentIndex:e})},update:function(e,t){return a({type:Y.UPDATE_ATTACHMENT,attachmentIndex:e,attachment:t})},setPageIndex:Object(c.useCallback)((function(e){return a({type:Y.UPDATE_PAGE_INDEX,pageIndex:e})}),[a]),pageAttachments:o,allPageAttachments:r}}(),H=F.add,_=F.allPageAttachments,W=F.pageAttachments,z=F.reset,J=F.update,q=F.remove,Z=F.setPageIndex,ee=K({use:G.PDF,afterUploadPdf:function(e){E(e);var t=e.pages.length;z(t)}}),te=ee.inputRef,ne=ee.handleClick,ae=ee.isUploading,re=ee.onClick,oe=ee.upload,ie=K({use:G.IMAGE,afterUploadAttachment:H}),ce=ie.inputRef,ue=ie.handleClick,le=ie.onClick,de=ie.upload;Object(c.useLayoutEffect)((function(){return Z(w)}),[w,Z]);var me=u.a.createElement(u.a.Fragment,null,u.a.createElement("input",{ref:te,type:"file",name:"pdf",id:"pdf",accept:"application/pdf",onChange:oe,onClick:re,style:{display:"none"}}),u.a.createElement("input",{ref:ce,type:"file",id:"image",name:"image",accept:"image/*",onClick:le,style:{display:"none"},onChange:de}));return u.a.createElement(f.a,{style:{margin:30}},me,u.a.createElement(O,{openHelp:function(){return a(!0)},savePdf:function(){return P(_)},addText:function(){var e={id:U(),type:o.TEXT,x:0,y:0,width:120,height:25,size:16,lineHeight:1.4,fontFamily:"Times-Roman",text:"Enter Text Here"};H(e)},addImage:ue,addDrawing:function(){return s(!0)},savingPdfStatus:k,uploadNewPdf:ne,isPdfLoaded:!!b}),b?u.a.createElement(p.a,null,u.a.createElement(p.a.Row,null,u.a.createElement(p.a.Column,{width:3,verticalAlign:"middle",textAlign:"left"},j&&!M&&u.a.createElement(h.a,{circular:!0,icon:"angle left",onClick:S})),u.a.createElement(p.a.Column,{width:10},A&&u.a.createElement(g.a,{compact:!0,stacked:j&&!y},u.a.createElement("div",{style:{position:"relative"}},u.a.createElement($,{dimensions:L,updateDimensions:N,page:A}),L&&u.a.createElement(se,{pdfName:R,removeAttachment:q,updateAttachment:J,pageDimensions:L,attachments:W})))),u.a.createElement(p.a.Column,{width:3,verticalAlign:"middle",textAlign:"right"},j&&!y&&u.a.createElement(h.a,{circular:!0,icon:"angle right",onClick:I})))):u.a.createElement(Q,{loading:ae,uploadPdf:ne}),u.a.createElement(x,{open:l,dismiss:function(){return s(!1)},confirm:function(e){if(e){var t=Object(d.a)({id:U(),type:o.DRAWING},e,{x:0,y:0,scale:1});H(t)}}}),u.a.createElement(T,{open:n,dismiss:function(){return a(!1)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));P.forEach((function(e){var t=e.name,n=e.src;S[t]=new Promise((function(e,a){var r=document.createElement("script");r.src=n,r.onload=function(){e(window[t]),console.log("".concat(t," is loaded."))},r.onerror=function(){return a("The script ".concat(t," didn't load correctly."))},document.body.appendChild(r)}))})),s.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[220,1,2]]]);
//# sourceMappingURL=main.b3c2f5de.chunk.js.map