(this["webpackJsonppdf-editor"]=this["webpackJsonppdf-editor"]||[]).push([[0],{224:function(e,t,n){e.exports=n(386)},229:function(e,t,n){},386:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(38),i=n.n(o),c=(n(229),n(56)),l=n(40),u=n(10),s=n.n(u),d=n(16),p=n(188),m=n(189),f=n(212),h=n(213),g=(n(231),n(400)),v=n(401),b=n(55),O=n(397),w=n(392),E=n(398),j=n(395),x=n(399),M=[{name:"pdfjsLib",src:"https://unpkg.com/pdfjs-dist@2.3.200/build/pdf.min.js"},{name:"PDFLib",src:"https://unpkg.com/pdf-lib@1.4.0/dist/pdf-lib.min.js"},{name:"download",src:"https://unpkg.com/downloadjs@1.4.7"},{name:"makeTextPDF",src:"https://cdn.jsdelivr.net/gh/snamoah/react-pdf-editor/public/makeTextPDF.js"},{name:"w3Color",src:"https://www.w3schools.com/lib/w3color.js"}],y={},k=function(e){return y[e]},D={Courier:{correction:function(e,t){return(e*t-e)/2+e/6}},Helvetica:{correction:function(e,t){return(e*t-e)/2+e/10}},"Times-Roman":{correction:function(e,t){return(e*t-e)/2+e/7}}},C=(Object(c.a)({},D,{"\u6a19\u6977\u9ad4":{src:"/CK.ttf",correction:function(e,t){return(e*t-e)/2}}}),function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}),S=function(e){return new Promise((function(t,n){var a=new Image;if(a.onload=function(){return t(a)},a.onerror=n,e instanceof Blob){var r=window.URL.createObjectURL(e);a.src=r}else a.src=e}))},I=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){return t(a.result)},a.onerror=n,a.readAsDataURL(e)}))},T=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("pdfjsLib");case 2:return n=e.sent,a=new Blob([t]),r=window.URL.createObjectURL(a),e.abrupt("return",n.getDocument(r).promise);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function P(){var e=0;return function(){return e++}}var F=function(e,t,n,a,r,o,i,c){var l=t+a,u=e+n;return{top:l<0?0:l+o>c+25?c-o+25:l,left:u<0?0:u+r>i+25?i-r+25:u}},A=function(e){return parseFloat((e/255).toFixed(1))};function L(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(s.a.mark((function e(t,n,a){var r,o,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("PDFLib");case 2:return r=e.sent,e.next=5,k("download");case 5:return o=e.sent,e.prev=6,e.t0=r.PDFDocument,e.next=10,C(t);case 10:return e.t1=e.sent,e.next=13,e.t0.load.call(e.t0,e.t1);case 13:i=e.sent,e.next=20;break;case 16:throw e.prev=16,e.t2=e.catch(6),console.log("Failed to load PDF."),e.t2;case 20:return c=i.getPages().map(function(){var e=Object(d.a)(s.a.mark((function e(t,a){var o,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n[a],c=t.getHeight(),l=o.map(function(){var e=Object(d.a)(s.a.mark((function e(n){var a,o,l,u,d,p,m,f,h,g,v,b,O,w,E,j,x,M,y,k,D,S,I,T,P,F,L,N,R,H;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!==n.type){e.next=29;break}if(o=(a=n).file,l=a.x,u=a.y,d=a.width,p=a.height,e.prev=2,"image/jpeg"!==o.type){e.next=13;break}return e.t0=i,e.next=7,C(o);case 7:return e.t1=e.sent,e.next=10,e.t0.embedJpg.call(e.t0,e.t1);case 10:m=e.sent,e.next=20;break;case 13:return e.t2=i,e.next=16,C(o);case 16:return e.t3=e.sent,e.next=19,e.t2.embedPng.call(e.t2,e.t3);case 19:m=e.sent;case 20:return e.abrupt("return",(function(){return t.drawImage(m,{x:l,y:c-u-p,width:d,height:p})}));case 23:throw e.prev=23,e.t4=e.catch(2),console.log("Failed to embed image.",e.t4),e.t4;case 27:e.next=41;break;case 29:if("text"!==n.type){e.next=37;break}return h=(f=n).x,g=f.y,v=f.text,b=f.lineHeight,O=f.size,w=f.fontFamily,E=f.width,e.next=33,i.embedFont(w);case 33:return j=e.sent,e.abrupt("return",(function(){return t.drawText(v,{maxWidth:E,font:j,size:O,lineHeight:b,x:h,y:c-O-g})}));case 37:if("drawing"!==n.type){e.next=41;break}return M=(x=n).x,y=x.y,k=x.path,D=x.scale,S=x.stroke,I=x.strokeWidth,T=r.pushGraphicsState,P=r.setLineCap,F=r.popGraphicsState,L=r.setLineJoin,N=r.LineCapStyle,R=r.LineJoinStyle,H=r.rgb,e.abrupt("return",(function(){t.pushOperators(T(),P(N.Round),L(R.Round));var e=window.w3color(S).toRgb();t.drawSvgPath(k,{borderColor:H(A(e.r),A(e.g),A(e.b)),borderWidth:I,scale:D,x:M,y:c-y}),t.pushOperators(F())}));case 41:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(l);case 5:e.sent.forEach((function(e){return e()}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=23,Promise.all(c);case 23:return e.prev=23,e.next=26,i.save();case 26:l=e.sent,o(l,a,"application/pdf"),e.next=34;break;case 30:throw e.prev=30,e.t3=e.catch(23),console.log("Failed to save PDF."),e.t3;case 34:case"end":return e.stop()}}),e,null,[[6,16],[23,30]])})))).apply(this,arguments)}var R,H,W,U,V=n(7),Y=function(e){var t=e.page,n=e.updateDimensions,o=Object(a.useRef)(null),i=Object(a.useState)(500),c=Object(V.a)(i,2),l=c[0],u=c[1],p=Object(a.useState)(window.innerHeight),m=Object(V.a)(p,2),f=m[0],h=m[1];return Object(a.useEffect)((function(){(function(){var e=Object(d.a)(s.a.mark((function e(t){var a,r,i,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!(a=e.sent)){e.next=12;break}if(i=null===(r=o.current)||void 0===r?void 0:r.getContext("2d"),c=a.getViewport({scale:1}),u(c.width),h(c.height),!i){e.next=12;break}return e.next=11,a.render({canvasContext:null===(l=o.current)||void 0===l?void 0:l.getContext("2d"),viewport:c}).promise;case 11:n({width:c.width,height:c.height});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[t,l,f,n]),r.a.createElement("div",null,r.a.createElement("canvas",{ref:o,width:l,height:f}))};!function(e){e.MOVE="MOVE",e.SCALE="SCALE",e.NO_MOVEMENT="NO_MOVEMENT"}(R||(R={})),function(e){e.RED="red",e.ORANGE="orange",e.YELLOW="yellow",e.OLIVE="olive",e.GREEN="green",e.TEAL="teal",e.BLUE="blue",e.VIOLOET="violet",e.PURPLE="purple",e.BROWN="brown",e.GREY="grey",e.BLACK="black"}(H||(H={})),function(e){e.IMAGE="image",e.DRAWING="drawing",e.TEXT="text"}(W||(W={})),function(e){e.INSERT="insert",e.COMMAND="command"}(U||(U={}));var z=n(402),B=n(190);function X(){var e=Object(B.a)(["\n    position: relative\n"]);return X=function(){return e},e}var _=n(191).a.div(X()),G=function(e){var t=e.title,n=e.onConfirm,a=e.onDismiss;return r.a.createElement("div",null,r.a.createElement(v.a,{as:"h4",inverted:!0},t),r.a.createElement(O.a,{onClick:a},"No"),r.a.createElement(O.a,{negative:!0,onClick:n},"Yes"))},J=function(e){var t=e.canvasRef,n=e.positionTop,a=e.positionLeft,o=e.width,i=e.height,c=e.handleMouseOut,l=e.handleMouseDown,u=e.handleMouseMove,s=e.handleMouseUp,d=e.handleImageScale,p=e.dimmerActive,m=e.cancelDelete,f=e.deleteImage,h=e.onClick;return r.a.createElement("div",{onMouseDown:l,onMouseMove:u,onMouseUp:s,onMouseOut:c,onDoubleClick:h,style:{position:"absolute",top:n,left:a,borderStyle:"dashed",borderWidth:1,borderColor:"grey",width:o+2,height:i+2,cursor:"move"}},r.a.createElement(z.a.Dimmable,{as:_,size:"medium",dimmed:p},r.a.createElement("canvas",{ref:t,style:{width:"100%",height:"100%"}}),r.a.createElement(z.a,{active:p,onClickOutside:m},r.a.createElement(G,{title:"Delete?",onConfirm:f,onDismiss:m}))),r.a.createElement("div",{"data-direction":"top-left",onMouseDown:l,onMouseUp:s,onMouseMove:d,style:{position:"absolute",cursor:"nwse-resize",top:-5,left:-5,width:20,height:20}}))},K=function(e){var t=e.x,n=e.y,o=e.payload,i=e.width,c=e.height,l=e.pageWidth,u=e.removeImage,s=e.pageHeight,d=e.updateImageObject,p=Object(a.useRef)(null),m=Object(a.useState)(i),f=Object(V.a)(m,2),h=f[0],g=f[1],v=Object(a.useState)(c),b=Object(V.a)(v,2),O=b[0],w=b[1],E=Object(a.useState)(!1),j=Object(V.a)(E,2),x=j[0],M=j[1],y=Object(a.useState)(n),k=Object(V.a)(y,2),D=k[0],C=k[1],S=Object(a.useState)(t),I=Object(V.a)(S,2),T=I[0],P=I[1],A=Object(a.useState)([]),L=Object(V.a)(A,2),N=L[0],H=L[1],W=Object(a.useState)(R.NO_MOVEMENT),U=Object(V.a)(W,2),Y=U[0],z=U[1],B=Object(a.useState)(!1),X=Object(V.a)(B,2),_=X[0],G=X[1],K=function(e){if(e.preventDefault(),M(!1),Y===R.MOVE){var t=F(T,D,e.movementX,e.movementY,h,O,l,s),n=t.top,a=t.left;d({x:a,y:n})}Y===R.SCALE&&d({x:T,y:D}),z(R.NO_MOVEMENT)};Object(a.useEffect)((function(){!function(e){var t=p.current;if(t){var n=t.getContext("2d");if(n){var a=1;h>300&&(a=300/h),O>300&&(a=Math.min(a,300/O));var r=h*a,i=O*a;g(r),w(i),t.width=r,t.height=i,n.drawImage(o,0,0,r,i),t.toBlob((function(e){d({file:e,width:r,height:i})}))}}}()}),[o,h,O,d]);var q=function(){return G(!1)};return r.a.createElement(J,{onClick:function(){return G(!0)},dimmerActive:_,cancelDelete:q,deleteImage:function(){q(),u()},positionLeft:T,positionTop:D,canvasRef:p,width:h,height:O,handleImageScale:function(e){e.preventDefault(),x&&(N.includes("left")&&(P(T+e.movementX),g(h-e.movementX)),N.includes("top")&&(C(D+e.movementY),w(O-e.movementY)),N.includes("right")&&g(h+e.movementX),N.includes("bottom")&&w(O+e.movementY))},handleMouseDown:function(e){e.preventDefault(),M(!0),z(R.MOVE);var t=e.currentTarget.dataset.direction;t&&(H(t.split("-")),z(R.SCALE))},handleMouseUp:K,handleMouseMove:function(e){if(e.preventDefault(),x){var t=F(T,D,e.movementX,e.movementY,h,O,l,s),n=t.top,a=t.left;C(n),P(a)}},handleMouseOut:function(e){Y===R.MOVE&&K(e)}})},q=function(e){var t=e.text,n=e.width,a=e.height,o=e.inputRef,i=e.mode,c=e.size,l=e.fontFamily,u=e.positionTop,s=e.positionLeft,d=e.onChangeText,p=e.toggleEditMode,m=e.handleMouseDown,f=e.handleMouseMove,h=e.handleMouseOut,g=e.handleMouseUp,v=e.lineHeight;return r.a.createElement("div",{onMouseDown:m,onMouseMove:f,onMouseUp:g,onMouseOut:h,onDoubleClick:p,style:{width:n,border:1,height:a,fontFamily:l,fontSize:c,lineHeight:v,cursor:i===U.COMMAND?"move":"default",top:u,left:s,borderColor:"gray",borderStyle:"solid",wordWrap:"break-word",padding:0,position:"absolute"}},r.a.createElement("input",{type:"text",ref:o,onChange:d,readOnly:i===U.COMMAND,style:{width:"100%",borderStyle:"none",borderWidth:0,fontFamily:l,fontSize:c,outline:"none",padding:0,boxSizing:"border-box",lineHeight:v,height:a,margin:0,backgroundColor:"transparent",cursor:i===U.COMMAND?"move":"text"},value:t}))},Q=function(e){var t=e.x,n=e.y,o=e.text,i=e.width,c=e.height,l=e.lineHeight,u=e.size,s=e.fontFamily,d=e.pageHeight,p=e.pageWidth,m=e.updateTextObject,f=Object(a.useRef)(null),h=Object(a.useState)(o||""),g=Object(V.a)(h,2),v=g[0],b=g[1],O=Object(a.useState)(!1),w=Object(V.a)(O,2),E=w[0],j=w[1],x=Object(a.useState)(n),M=Object(V.a)(x,2),y=M[0],k=M[1],D=Object(a.useState)(t),C=Object(V.a)(D,2),S=C[0],I=C[1],T=Object(a.useState)(R.NO_MOVEMENT),P=Object(V.a)(T,2),A=P[0],L=P[1],N=Object(a.useState)(U.COMMAND),H=Object(V.a)(N,2),W=H[0],Y=H[1],z=function(e){if(e.preventDefault(),W===U.COMMAND){if(j(!1),A===R.MOVE){var t=F(S,y,e.movementX,e.movementY,i,c,p,d),n=t.top,a=t.left;m({x:a,y:n})}L(R.NO_MOVEMENT)}},B=function(){var e;null===(e=document.getSelection())||void 0===e||e.removeAllRanges(),m({lines:[v],text:v})};return r.a.createElement(q,{text:v,width:i,height:c,mode:W,size:u,lineHeight:l,inputRef:f,fontFamily:s,positionTop:y,onChangeText:function(e){var t=e.currentTarget.value;b(t)},positionLeft:S,handleMouseUp:z,toggleEditMode:function(){var e=f.current,t=W===U.COMMAND?U.INSERT:U.COMMAND;Y(t),e&&t===U.INSERT?(e.focus(),e.select()):B()},handleMouseOut:function(e){A===R.MOVE&&z(e),W===U.INSERT&&(Y(U.COMMAND),B())},handleMouseDown:function(e){W===U.COMMAND&&(j(!0),L(R.MOVE))},handleMouseMove:function(e){if(e.preventDefault(),E){var t=F(S,y,e.movementX,e.movementY,i,c,p,d),n=t.top,a=t.left;k(n),I(a)}}})},$=function(e){var t=e.dimmerActive,n=e.cancelDelete,a=e.deleteDrawing,o=e.positionTop,i=e.positionLeft,c=e.width,l=e.height,u=e.svgRef,s=e.path,d=e.stroke,p=e.strokeWidth,m=e.handleMouseDown,f=e.handleMouseMove,h=e.handleMouseOut,g=e.handleMouseUp,v=e.onClick;return r.a.createElement("div",{onMouseDown:m,onMouseMove:f,onMouseUp:g,onMouseOut:h,onDoubleClick:v,style:{position:"absolute",top:o,left:i,width:c,height:l,cursor:"move"}},r.a.createElement(z.a.Dimmable,{as:_,dimmed:t},r.a.createElement("svg",{ref:u},r.a.createElement("path",{strokeWidth:p,strokeLinecap:"round",strokeLinejoin:"round",stroke:d,fill:"none",d:s})),r.a.createElement(z.a,{active:t,onClickOutside:n},r.a.createElement(G,{title:"Delete?",onConfirm:a,onDismiss:n}))))},Z=function(e){var t=e.x,n=e.y,o=e.width,i=e.height,c=e.stroke,l=e.strokeWidth,u=e.path,s=e.pageWidth,d=e.pageHeight,p=e.removeDrawing,m=e.updateDrawingObject,f=Object(a.createRef)(),h=Object(a.useState)(!1),g=Object(V.a)(h,2),v=g[0],b=g[1],O=Object(a.useState)(n),w=Object(V.a)(O,2),E=w[0],j=w[1],x=Object(a.useState)(t),M=Object(V.a)(x,2),y=M[0],k=M[1],D=Object(a.useState)(R.NO_MOVEMENT),C=Object(V.a)(D,2),S=C[0],I=C[1],T=Object(a.useState)(!1),P=Object(V.a)(T,2),A=P[0],L=P[1];Object(a.useEffect)((function(){var e=f.current;e&&e.setAttribute("viewBox","0 0 ".concat(o," ").concat(i))}),[f,o,i]);var N=function(e){if(e.preventDefault(),b(!1),S===R.MOVE){var t=F(y,E,e.movementX,e.movementY,o,i,s,d),n=t.top,a=t.left;m({x:a,y:n})}S===R.SCALE&&m({x:y,y:E}),I(R.NO_MOVEMENT)},H=function(){return L(!1)};return r.a.createElement($,{stroke:c,strokeWidth:l,path:u,width:o,svgRef:f,height:i,onClick:function(){return L(!0)},cancelDelete:H,dimmerActive:A,deleteDrawing:function(){H(),p()},handleMouseDown:function(e){b(!0),I(R.MOVE)},handleMouseMove:function(e){if(e.preventDefault(),v){var t=F(y,E,e.movementX,e.movementY,o,i,s,d),n=t.top,a=t.left;j(n),k(a)}},handleMouseOut:function(e){S===R.MOVE&&N(e)},handleMouseUp:N,positionLeft:y,positionTop:E})},ee=n(393),te=n(396),ne=[{title:"What's this?",content:["This is a piece of sofware that allows you to edit your PDFs. You can add images and drawings to your pdf.","And there are more features coming up like adding text."]},{title:"How do I delete an attached image or drawing?",content:["Easy! Just double click the image or drawing. You will be asked to confirm delete and then, voila, it's gone!"]},{title:"Can I add multiple images or drawings on a page?",content:["Yes."]},{title:"How can I delete my uploaded pdf?",content:["You can't delete the uploaded pdf.","You will have to upload a new one. This is a client-side app so you did not actually uploaded it to any server. Don't worry :)"]},{title:"Can I resize a drawing?",content:["No. Currently it is not possible to resize a drawing"]},{title:"Can I resize an image?",content:["Yes you can. Move your mouse to the top-left corner of the image.","The cursor should change and you should be able to resize from there"]},{title:"Can I load multi-page pdf?",content:["Yes."]},{title:"How do I add text to the pdf?",content:["-  In the dropdown menu for edit, select add Text. This will add a text object to your pdf","-  You should see a textbox with placeholder text `Enter Text Here`","-  The textbox has two modes, edit mode and command mode, you can toggle between either by double clicking any area within the textbox.","-  In Edit Mode, you can enter your desired text","-  In Command Mode, you can move the textbox around to change it's position"]},{title:"Why can't I enter multi-line text?",content:["The textfield feature is in beta. There are more functionalities to be added like resizing, selecting fonts, changing font size etc which are in development.","These functionalities should be available in the next release"]}],ae=function(e){var t=e.open,n=e.dismiss,o=Object(a.useState)(-1),i=Object(V.a)(o,2),c=i[0],l=i[1],u=function(e,t){var n=t.index;l(c===n?-1:n)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{open:t,onClose:n,size:"small",dimmer:"inverted"},r.a.createElement(ee.a.Header,null,r.a.createElement(b.a,{name:"question"}),"FAQ"),r.a.createElement(ee.a.Content,{scrolling:!0},r.a.createElement(te.a,{fluid:!0,styled:!0},ne.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(te.a.Title,{active:c===t,index:t,onClick:u},r.a.createElement(b.a,{name:"dropdown"}),e.title),r.a.createElement(te.a.Content,{active:c===t},e.content.map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}))))))},re=n(95),oe=function(e){var t=e.open,n=e.dismiss,o=e.confirm,i=e.drawing,c=Object(a.createRef)(),u=Object(a.useState)([]),s=Object(V.a)(u,2),d=s[0],p=s[1],m=Object(a.useState)(i&&i.path||""),f=Object(V.a)(m,2),h=f[0],g=f[1],v=Object(a.useState)(0),b=Object(V.a)(v,2),w=b[0],x=b[1],M=Object(a.useState)(0),y=Object(V.a)(M,2),k=y[0],D=y[1],C=Object(a.useState)(1/0),S=Object(V.a)(C,2),I=S[0],T=S[1],P=Object(a.useState)(0),F=Object(V.a)(P,2),A=F[0],L=F[1],N=Object(a.useState)(1/0),R=Object(V.a)(N,2),W=R[0],U=R[1],Y=Object(a.useState)(0),z=Object(V.a)(Y,2),B=z[0],X=z[1],_=Object(a.useState)(!1),G=Object(V.a)(_,2),J=G[0],K=G[1],q=Object(a.useState)(5),Q=Object(V.a)(q,2),$=Q[0],Z=Q[1],te=Object(a.useState)(H.BLACK),ne=Object(V.a)(te,2),ae=ne[0],oe=ne[1],ie=Object(a.useState)(!1),ce=Object(V.a)(ie,2),le=ce[0],ue=ce[1];Object(a.useEffect)((function(){var e=c.current;if(e){var t=e.getBoundingClientRect(),n=t.x,a=t.y;x(n),D(a)}}),[c]);var se=function(){p([]),g(""),T(1/0),L(0),U(1/0),X(0),Z(5),oe(H.BLACK),n()},de=function(e){return function(){oe(e),ue(!1)}};return r.a.createElement(ee.a,{size:"small",dimmer:"inverted",open:t,onClose:se},r.a.createElement(ee.a.Header,null,"Add your Drawing"),r.a.createElement(ee.a.Content,null,r.a.createElement(E.a,{size:"tiny"},r.a.createElement(E.a.Item,{header:!0},"Tools"),r.a.createElement(E.a.Menu,{position:"right"},r.a.createElement(j.a,{item:!0,text:"".concat($)},r.a.createElement(j.a.Menu,null,[1,2,3,4,5,6,7,8,9,10].map((function(e){return r.a.createElement(j.a.Item,{key:e,selected:e===$,onClick:function(){return Z(e)}},e)})))),r.a.createElement(j.a,{item:!0,trigger:r.a.createElement(re.a,{color:ae}),onClick:function(){return ue(!0)},onBlur:function(){return ue(!1)}},r.a.createElement(j.a.Menu,{open:le},r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",padding:5}},Object.values(H).map((function(e,t){return r.a.createElement("div",{style:{margin:2.5},key:t},r.a.createElement(re.a,{color:e,onClick:de(e)}))}))))))),r.a.createElement("div",{onMouseDown:function(e){e.preventDefault(),K(!0);var t=e.clientX-w,n=e.clientY-k;T(Math.min(I,t)),L(Math.max(A,t)),U(Math.min(W,n)),X(Math.max(B,n)),g(h+"M".concat(t,",").concat(n)),p([].concat(Object(l.a)(d),[["M",t,n]]))},onMouseMove:function(e){if(e.preventDefault(),J){var t=e.clientX-w,n=e.clientY-k;T(Math.min(I,t)),L(Math.max(A,t)),U(Math.min(W,n)),X(Math.max(B,n)),g(h+"L".concat(t,",").concat(n)),p([].concat(Object(l.a)(d),[["L",t,n]]))}},onMouseUp:function(e){e.preventDefault(),K(!1)}},r.a.createElement("svg",{ref:c,style:{width:"100%",height:"50vh"}},r.a.createElement("path",{strokeWidth:$,strokeLinejoin:"round",strokeLinecap:"round",stroke:ae,fill:"none",d:h})))),r.a.createElement(ee.a.Actions,null,r.a.createElement(O.a,{color:"black",content:"Cancel",onClick:se}),r.a.createElement(O.a,{content:"Done",labelPosition:"right",icon:"checkmark",onClick:function(){if(d.length){var e=-(I-10),t=-(W-10);o({stroke:ae,strokeWidth:$,width:A-I+20,height:B-W+20,path:d.reduce((function(n,a){return"".concat(n).concat(a[0]).concat(a[1]+e,", ").concat(a[2]+t)}),"")}),se()}else o()},positive:!0})))},ie=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).pdfInput=void 0,a.imageInput=void 0,a.state={pdfFile:void 0,selectedPageIndex:-1,pdfName:"",pages:[],allObjects:[],pagesScale:[],pageDimensions:[],saving:!1,drawing:!1,uploading:!1,selectedDrawing:0,helpModalOpen:!1},a.onUploadPDF=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({uploading:!0}),n=t.target.files||t.dataTransfer&&t.dataTransfer.files){e.next=4;break}return e.abrupt("return");case 4:if((r=n[0])&&"application/pdf"===r.type){e.next=7;break}return e.abrupt("return");case 7:return a.setState({selectedPageIndex:-1}),e.prev=8,e.next=11,a.addPDF(r);case 11:a.setState({selectedPageIndex:0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log(e.t0);case 17:return e.prev=17,a.setState({uploading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[8,14,17,20]])})));return function(t){return e.apply(this,arguments)}}(),a.addPDF=function(){var e=Object(d.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:n=e.sent,a.setState({pdfName:t.name,pdfFile:t,pages:Array(n.numPages).fill(0).map((function(e,t){return n.getPage(t+1)})),allObjects:Array(n.numPages).fill([]),pagesScale:Array(n.numPages).fill(1),pageDimensions:Array(n.numPages).fill({width:0,height:0})}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("Failed to add pdf."),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.savePDF=Object(d.a)(s.a.mark((function e(){var t,n,r,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.pdfFile,r=t.saving,o=t.pages,i=t.allObjects,c=t.pdfName,n&&!r&&o.length){e.next=3;break}return e.abrupt("return");case 3:return a.setState({saving:!0}),e.prev=4,e.next=7,L(n,i,c);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.log(e.t0);case 12:return e.prev=12,a.setState({saving:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])}))),a.clearInput=function(e){e.currentTarget.value=""},a.renderHiddenInputs=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{ref:a.pdfInput,type:"file",name:"pdf",id:"pdf",accept:"application/pdf",onChange:a.onUploadPDF,onClick:a.clearInput,style:{display:"none"}}),a.state.selectedPageIndex>-1&&r.a.createElement("input",{ref:a.imageInput,type:"file",id:"image",name:"image",accept:"image/*",onClick:a.clearInput,style:{display:"none"},onChange:a.onUploadImage}))},a.onUploadImage=function(e){var t=a.state.selectedPageIndex,n=e.target.files&&e.target.files[0];n&&t>=0&&a.addImage(n)},a.addImage=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,r,o,i,c,u,d,p,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,r=n.allObjects,o=n.selectedPageIndex,e.prev=1,e.next=4,I(t);case 4:return i=e.sent,e.next=7,S(i);case 7:c=e.sent,u=P(),d=c.width,p=c.height,m={id:u,type:"image",width:d,height:p,x:0,y:0,payload:c,file:t},a.setState({allObjects:r.map((function(e,t){return t===o?[].concat(Object(l.a)(e),[m]):e}))}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("Fail to add image.",e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),a.handleFileInput=function(e){return function(){var t="pdf"===e?a.pdfInput.current:"image"===e?a.imageInput.current:null;t&&t.click()}},a.renderEmpty=function(){return r.a.createElement(g.a,{placeholder:!0,loading:a.state.uploading,style:{height:"80vh"}},r.a.createElement(v.a,{icon:!0},r.a.createElement(b.a,{name:"file pdf outline"}),"Upload your PDF to start editing!"),r.a.createElement(O.a,{primary:!0,onClick:a.handleFileInput("pdf")},"Load PDF"))},a.nextPage=function(){a.setState((function(e){return{selectedPageIndex:e.selectedPageIndex+1}}))},a.previousPage=function(){a.setState((function(e){return{selectedPageIndex:e.selectedPageIndex-1}}))},a.updateObject=function(e,t,n){var r=a.state.allObjects,o=r[t],i=o[e],l=Object(c.a)({},i,{},n);o[e]=l,a.setState({allObjects:r.map((function(e,n){return t===n?o:e}))})},a.updatePageDimensions=function(e,t){a.setState({pageDimensions:a.state.pageDimensions.map((function(n,a){return e===a?t:n}))})},a.removeObject=function(e,t){var n=a.state.allObjects,r=n[t];r.splice(e,1),n[t]=r,a.setState({allObjects:n})},a.openDrawingModal=function(){a.setState({drawing:!0})},a.closeDrawingModal=function(){a.setState({drawing:!1})},a.addDrawing=function(e,t){var n=a.state.allObjects;if(t){var r=Object(c.a)({id:P(),type:"drawing"},t,{x:0,y:0,scale:1});a.setState({allObjects:n.map((function(t,n){return e===n?[].concat(Object(l.a)(t),[r]):t}))})}},a.addText=function(){var e=a.state,t=e.allObjects,n=e.selectedPageIndex,r={id:P(),type:"text",x:0,y:0,width:120,height:25,size:16,lineHeight:1.4,fontFamily:"Times-Roman",text:"Enter Text Here"};a.setState({allObjects:t.map((function(e,t){return n===t?[].concat(Object(l.a)(e),[r]):e}))})},a.pdfInput=r.a.createRef(),a.imageInput=r.a.createRef(),a}return Object(m.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.allObjects,a=t.pdfName,o=t.pdfFile,i=t.pages,c=t.saving,l=t.selectedPageIndex,u=t.pageDimensions,s=i.length>1,d=l===i.length-1,p=i[l],m=n[l],f=u[l];return r.a.createElement(w.a,{style:{margin:30}},this.renderHiddenInputs(),r.a.createElement(E.a,{pointing:!0},r.a.createElement(E.a.Item,{header:!0},"PDF Editor"),r.a.createElement(E.a.Menu,{position:"right"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{item:!0,closeOnBlur:!0,icon:"edit outline",simple:!0},r.a.createElement(j.a.Menu,null,r.a.createElement(j.a.Item,{onClick:this.addText},"Add Text"),r.a.createElement(j.a.Item,{onClick:this.handleFileInput("image")},"Add Image"),r.a.createElement(j.a.Item,{onClick:this.openDrawingModal},"Add Drawing"))),r.a.createElement(E.a.Item,{name:c?"Saving...":"Save",disabled:c,onClick:this.savePDF}),r.a.createElement(E.a.Item,{name:"Upload New",onClick:this.handleFileInput("pdf")})),r.a.createElement(E.a.Item,{onClick:function(){return e.setState({helpModalOpen:!0})}},r.a.createElement(b.a,{name:"question circle outline"})))),o?r.a.createElement(x.a,null,r.a.createElement(x.a.Row,null,r.a.createElement(x.a.Column,{width:3,verticalAlign:"middle"},s&&0!==l&&r.a.createElement(O.a,{circular:!0,icon:"angle left",onClick:this.previousPage})),r.a.createElement(x.a.Column,{width:10},p&&r.a.createElement(g.a,{style:{position:"relative"},compact:!0,stacked:s&&!d},r.a.createElement(Y,{updateDimensions:function(t){return e.updatePageDimensions(l,t)},page:p}),m&&m.map((function(t,n){var o="".concat(a,"-").concat(n);return"image"===t.type?r.a.createElement(K,Object.assign({removeImage:function(){return e.removeObject(n,l)},key:o,pageWidth:f.width,pageHeight:f.height,updateImageObject:function(t){return e.updateObject(n,l,t)}},t)):"drawing"===t.type?r.a.createElement(Z,Object.assign({key:o,removeDrawing:function(){return e.removeObject(n,l)},pageWidth:f.width,pageHeight:f.height,updateDrawingObject:function(t){return e.updateObject(n,l,t)}},t)):"text"===t.type?r.a.createElement(Q,Object.assign({key:o,pageWidth:f.width,pageHeight:f.height,updateTextObject:function(t){return e.updateObject(n,l,t)}},t)):null})))),r.a.createElement(x.a.Column,{width:3,verticalAlign:"middle",textAlign:"right"},s&&l!==i.length-1&&r.a.createElement(O.a,{circular:!0,icon:"angle right",onClick:this.nextPage})))):this.renderEmpty(),r.a.createElement(oe,{open:this.state.drawing,dismiss:this.closeDrawingModal,confirm:function(t){return e.addDrawing(l,t)}}),r.a.createElement(ae,{open:this.state.helpModalOpen,dismiss:function(){return e.setState({helpModalOpen:!1})}}))}}]),n}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));M.forEach((function(e){var t=e.name,n=e.src;y[t]=new Promise((function(e,a){var r=document.createElement("script");r.src=n,r.onload=function(){e(window[t]),console.log("".concat(t," is loaded."))},r.onerror=function(){return a("The script ".concat(t," didn't load correctly."))},document.body.appendChild(r)}))})),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[224,1,2]]]);
//# sourceMappingURL=main.61cf628d.chunk.js.map